<!DOCTYPE html>
<html lang="uz">

<head>
    <script src="https://static.readdy.ai/static/e.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>"Uzum Market — O‘zbekistondagi Internet-do'kon va Marketpleys" </title>
    <script src="https://cdn.tailwindcss.com/3.4.16"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.6.0/remixicon.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/5.5.0/echarts.min.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#3b82f6',
                        secondary: '#8b5cf6'
                    },
                    borderRadius: {
                        'none': '0px',
                        'sm': '4px',
                        DEFAULT: '8px',
                        'md': '12px',
                        'lg': '16px',
                        'xl': '20px',
                        '2xl': '24px',
                        '3xl': '32px',
                        'full': '9999px',
                        'button': '8px'
                    }
                }
            }
        }
    </script>
    <style>
        :where([class^="ri-"])::before {
            content: "\f3c2";
        }
    </style>
</head>

<body class="bg-gray-50 min-h-screen">
    <div class="flex h-screen">
        <!-- Sidebar -->
        {% include 'adminnav.html' %}
        <!-- Main Content -->
        <div class="flex-1 flex flex-col">
            <!-- Top Navbar -->
            {% include 'adminbars.html' %}
            <!-- Main Content Area -->
            <main class="flex-1 p-6 overflow-y-auto">
                <!-- Stats Cards -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                    <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-200">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-gray-600">Kunlik savdo</p>
                                {% for states in states %}
                                <p class="text-2xl font-bold text-gray-900">{{states.asl_narhi}}</p>
                                {% endfor %}
                                <p class="text-sm text-green-600 mt-1">+12.5% kecha</p>
                            </div>
                            <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center">
                                <i class="ri-money-dollar-circle-line text-green-600 text-xl"></i>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-200">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-gray-600">Faol buyurtmalar</p>
                                <p class="text-2xl font-bold text-gray-900">127</p>
                                <p class="text-sm text-blue-600 mt-1">+8 yangi</p>
                            </div>
                            <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center">
                                <i class="ri-shopping-cart-line text-blue-600 text-xl"></i>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-200">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-gray-600">Umumiy mahsulotlar</p>
                                <p class="text-2xl font-bold text-gray-900">{{ total_items }}</p>
                                <p class="text-sm text-purple-600 mt-1">+23 qo'shildi</p>
                            </div>
                            <div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center">
                                <i class="ri-box-3-line text-purple-600 text-xl"></i>
                            </div>
                        </div>

                    </div>
                    <div class="flex items-center justify-between">
                     <div>
                         <p class="text-sm text-gray-600">Sotilgan mahsulotlar</p>
                         <p class="text-2xl font-bold text-gray-900">{{ sotilganlar_soni }}</p>
                         <p class="text-sm text-purple-600 mt-1">+23 qo'shildi</p>
                     </div>
                     <div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center">
                         <i class="ri-box-3-line text-purple-600 text-xl"></i>
                     </div>
                 </div>
                    <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-200">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-gray-600">Mijozlar</p>
                                <p class="text-2xl font-bold text-gray-900">{{ total_users }}</p>
                                <p class="text-sm text-orange-600 mt-1">+156 yangi</p>
                            </div>
                            <div class="w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center">
                                <i class="ri-user-line text-orange-600 text-xl"></i>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Charts Section -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                    <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-200">
                        <div class="flex items-center justify-between mb-6">
                            <h3 class="text-lg font-semibold text-gray-900">Savdo statistikasi</h3>
                            <select class="border border-gray-300 rounded-lg px-3 py-1 text-sm pr-8">
                                <option>So'nggi 7 kun</option>
                                <option>So'nggi 30 kun</option>
                                <option>So'nggi 3 oy</option>
                            </select>
                        </div>
                        <div id="salesChart" class="h-64"></div>
                    </div>
                    <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-200">
                        <div class="flex items-center justify-between mb-6">
                            <h3 class="text-lg font-semibold text-gray-900">Kategoriya bo'yicha savdo</h3>
                            <button class="text-primary text-sm font-medium">Batafsil</button>
                        </div>
                        <div id="categoryChart" class="h-64"></div>
                    </div>
                </div>
                <!-- Tables Section -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- Recent Orders -->
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200">
                        <div class="p-6 border-b border-gray-200">
                            <div class="flex items-center justify-between">
                                <h3 class="text-lg font-semibold text-gray-900">So'nggi buyurtmalar</h3>
                                <button class="text-primary text-sm font-medium">Barchasini ko'rish</button>
                            </div>
                        </div>
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">ID
                                        </th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">
                                            Mijoz</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">
                                            Summa</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">
                                            Status</th>
                                    </tr>
                                </thead>
                                <tbody class="divide-y divide-gray-200">
                                    {% for users in users %}
                                    <tr>
                                        <td class="px-6 py-4 text-sm text-gray-900">#1247</td>
                                        <td class="px-6 py-4 text-sm text-gray-900">{{  users.username}}</td>
                                        <td class="px-6 py-4 text-sm text-gray-900">450,000 so'm</td>
                                        <td class="px-6 py-4">
                                            <span
                                                class="inline-flex px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full">Tayyor</span>
                                        </td>
                                    </tr>
                                    {% endfor %}
                                 
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <!-- Top Products -->
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200">
                        <div class="p-6 border-b border-gray-200">
                            <div class="flex items-center justify-between">
                                <h3 class="text-lg font-semibold text-gray-900">Eng ko'p sotilgan mahsulotlar</h3>
                                <button class="text-primary text-sm font-medium">Batafsil</button>
                            </div>
                        </div>
                        <div class="p-6 space-y-4">
                            {% for sotilganlar in sotilganlar %}
                            <div class="flex items-center space-x-4">
                                <img src="{{  sotilganlar.img.url }}"
                                    alt="Mahsulot" class="w-12 h-12 rounded-lg object-cover">
                                <div class="flex-1">
                                    <p class="font-medium text-gray-900">{{ sotilganlar.nomi }}</p>
                                  
                                </div>
                                <p class="font-semibold text-gray-900">{{ sotilganlar.asl_narhi }} so'm</p>
                            </div>
                           {% endfor %}
                    </div>
                </div>
                <!-- Quick Actions -->
                <div class="mt-8 bg-white rounded-xl shadow-sm p-6 border border-gray-200">
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">Tezkor harakatlar</h3>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                        <button
                            class="flex items-center space-x-3 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 !rounded-button whitespace-nowrap">
                            <div class="w-8 h-8 bg-primary rounded-lg flex items-center justify-center">
                                <i class="ri-add-line text-white"></i>
                            </div>
                            <span class="font-medium text-gray-900">Mahsulot qo'shish</span>
                        </button>
                        <button
                            class="flex items-center space-x-3 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 !rounded-button whitespace-nowrap">
                            <div class="w-8 h-8 bg-green-500 rounded-lg flex items-center justify-center">
                                <i class="ri-file-excel-line text-white"></i>
                            </div>
                            <span class="font-medium text-gray-900">Ma'lumot eksport</span>
                        </button>
                        <button
                            class="flex items-center space-x-3 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 !rounded-button whitespace-nowrap">
                            <div class="w-8 h-8 bg-purple-500 rounded-lg flex items-center justify-center">
                                <i class="ri-coupon-line text-white"></i>
                            </div>
                            <span class="font-medium text-gray-900">Chegirma yaratish</span>
                        </button>
                        <button
                            class="flex items-center space-x-3 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 !rounded-button whitespace-nowrap">
                            <div class="w-8 h-8 bg-orange-500 rounded-lg flex items-center justify-center">
                                <i class="ri-mail-send-line text-white"></i>
                            </div>
                            <span class="font-medium text-gray-900">Email yuborish</span>
                        </button>
                    </div>
                </div>
            </main>
        </div>
    </div>
    
    <script id="salesChartScript">
        document.addEventListener('DOMContentLoaded', function () {
            const salesChart = echarts.init(document.getElementById('salesChart'));
            const salesOption = {
                animation: false,
                grid: { top: 0, right: 0, bottom: 0, left: 0 },
                xAxis: {
                    type: 'category',
                    data: ['Dush', 'Sesh', 'Chor', 'Pay', 'Jum', 'Shan', 'Yak'],
                    axisLine: { show: false },
                    axisTick: { show: false },
                    axisLabel: { color: '#6b7280', fontSize: 12 }
                },
                yAxis: {
                    type: 'value',
                    axisLine: { show: false },
                    axisTick: { show: false },
                    axisLabel: { color: '#6b7280', fontSize: 12 },
                    splitLine: { lineStyle: { color: '#f3f4f6' } }
                },
                series: [{
                    data: [2100, 1800, 2400, 2200, 2800, 2600, 2450],
                    type: 'line',
                    smooth: true,
                    symbol: 'none',
                    lineStyle: { color: 'rgba(87, 181, 231, 1)', width: 3 },
                    areaStyle: {
                        color: {
                            type: 'linear',
                            x: 0, y: 0, x2: 0, y2: 1,
                            colorStops: [
                                { offset: 0, color: 'rgba(87, 181, 231, 0.1)' },
                                { offset: 1, color: 'rgba(87, 181, 231, 0)' }
                            ]
                        }
                    }
                }],
                tooltip: {
                    trigger: 'axis',
                    backgroundColor: 'rgba(255, 255, 255, 0.9)',
                    borderColor: '#e5e7eb',
                    textStyle: { color: '#1f2937' }
                }
            };
            salesChart.setOption(salesOption);
        });
    </script>
    <script id="categoryChartScript">
        document.addEventListener('DOMContentLoaded', function () {
            const categoryChart = echarts.init(document.getElementById('categoryChart'));
            const categoryOption = {
                animation: false,
                grid: { top: 0, right: 0, bottom: 0, left: 0 },
                series: [{
                    type: 'pie',
                    radius: ['40%', '70%'],
                    center: ['50%', '50%'],
                    data: [
                        { value: 35, name: 'Smartfonlar', itemStyle: { color: 'rgba(87, 181, 231, 1)', borderRadius: 4 } },
                        { value: 28, name: 'Noutbuklar', itemStyle: { color: 'rgba(141, 211, 199, 1)', borderRadius: 4 } },
                        { value: 22, name: 'Aksessuarlar', itemStyle: { color: 'rgba(251, 191, 114, 1)', borderRadius: 4 } },
                        { value: 15, name: 'Boshqalar', itemStyle: { color: 'rgba(252, 141, 98, 1)', borderRadius: 4 } }
                    ],
                    label: { show: false },
                    emphasis: { itemStyle: { shadowBlur: 10, shadowOffsetX: 0, shadowColor: 'rgba(0, 0, 0, 0.1)' } }
                }],
                tooltip: {
                    trigger: 'item',
                    backgroundColor: 'rgba(255, 255, 255, 0.9)',
                    borderColor: '#e5e7eb',
                    textStyle: { color: '#1f2937' },
                    formatter: '{a} <br/>{b}: {c}% ({d}%)'
                },
                legend: {
                    orient: 'vertical',
                    right: 10,
                    top: 'center',
                    textStyle: { color: '#1f2937', fontSize: 12 }
                }
            };
            categoryChart.setOption(categoryOption);
        });
    </script>
</body>

</html>